___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Rakuten",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Rakuten server to server conversion tracking",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "RADIO",
    "name": "type",
    "displayName": "Event Type",
    "radioItems": [
      {
        "value": "page_view",
        "displayValue": "PageView"
      },
      {
        "value": "conversion",
        "displayValue": "Conversion"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "page_view",
    "help": "\u003cb\u003ePageView\u003c/b\u003e - stores the siteID, ranMID, ranEAID, and ranSiteID URL parameter inside the rakuten_site_id, rakuten_time_entered, rakuten_ran_mid, rakuten_ran_eaid, rakuten_ran_site_id cookies\u003cbr\u003e\u003cbr\u003e\n\u003cb\u003eConversion\u003c/b\u003e - Send request with data about the conversion to the Rakuten"
  },
  {
    "type": "GROUP",
    "name": "conversionGroup",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "mid",
        "displayName": "Affiliate Merchant ID (MID)",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "help": "Provided by Rakuten Affiliate"
      },
      {
        "type": "TEXT",
        "name": "affiliateKey",
        "displayName": "Affiliate Key",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "help": "Provided by Rakuten Affiliate"
      },
      {
        "type": "TEXT",
        "name": "orderId",
        "displayName": "Order ID",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "help": "This is a unique transaction orderID composed of 1 to 40 nonblank characters. This should be the same orderID value that you originally reported for the sale in the MOP."
      },
      {
        "type": "TEXT",
        "name": "currency",
        "displayName": "Currency",
        "simpleValueType": true,
        "help": "The ISO4217 currency code reference. Use (‘USD’, ‘CAD’, ‘GBP’, ‘JPY’, ‘BRL’, or ‘AUD’) for U.S. dollar, Canadian dollar, British pound, Japanese yen, Brazilian real, or Australian dollar.",
        "defaultValue": "USD",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "CHECKBOX",
        "name": "overrideItems",
        "checkboxText": "Override items array",
        "simpleValueType": true,
        "help": "By default items array generates from the Event Data items."
      },
      {
        "type": "TEXT",
        "name": "items",
        "displayName": "Items",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "overrideItems",
            "paramValue": true,
            "type": "EQUALS"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "conversion",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "optionalDataGroup",
    "displayName": "Optional Data",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "optionalData",
        "simpleTableColumns": [
          {
            "defaultValue": "email",
            "displayName": "Property Name",
            "name": "name",
            "type": "TEXT",
            "selectItems": [],
            "isUnique": true,
            "valueValidators": []
          },
          {
            "defaultValue": "",
            "displayName": "Property Value",
            "name": "value",
            "type": "TEXT"
          }
        ],
        "newRowButtonText": "Add property"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "logsGroup",
    "displayName": "Logs Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "RADIO",
        "name": "logType",
        "radioItems": [
          {
            "value": "no",
            "displayValue": "Do not log"
          },
          {
            "value": "debug",
            "displayValue": "Log to console during debug and preview"
          },
          {
            "value": "always",
            "displayValue": "Always log to console"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "debug"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "conversion",
        "type": "EQUALS"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const sendHttpRequest = require('sendHttpRequest');
const setCookie = require('setCookie');
const parseUrl = require('parseUrl');
const JSON = require('JSON');
const getRequestHeader = require('getRequestHeader');
const getCookieValues = require('getCookieValues');
const getEventData = require('getEventData');
const getAllEventData = require('getAllEventData');
const logToConsole = require('logToConsole');
const getContainerVersion = require('getContainerVersion');
const makeString = require('makeString');
const getTimestampMillis = require('getTimestampMillis');
const makeTableMap = require('makeTableMap');
const encodeUriComponent = require('encodeUriComponent');
const Math = require('Math');

const isLoggingEnabled = determinateIsLoggingEnabled();
const traceId = getRequestHeader('trace-id');
const eventData = getAllEventData();

if (data.type === 'page_view') {
  const url = getEventData('page_location') || getRequestHeader('referer');

  if (url) {
    const siteIdValue = parseUrl(url).searchParams.siteID;
    const ranMidValue = parseUrl(url).searchParams.ranMID;
    const ranEaidValue = parseUrl(url).searchParams.ranEAID;
    const ranSiteIdValue = parseUrl(url).searchParams.ranSiteID;
    const rakutenSiteIdValue = siteIdValue || ranSiteIdValue;

    const options = {
      domain: 'auto',
      path: '/',
      secure: true,
      httpOnly: false,
      'max-age': 63072000, // 2 years
    };

    if (rakutenSiteIdValue) {
      setCookie(
        'rakuten_site_id',
        makeString(rakutenSiteIdValue),
        options,
        false
      );
      setCookie(
        'rakuten_time_entered',
        makeString(Math.round(getTimestampMillis() / 1000)),
        options,
        false
      );
    }

    if (ranMidValue)
      setCookie('rakuten_ran_mid', makeString(ranMidValue), options, false);
    if (ranEaidValue)
      setCookie('rakuten_ran_eaid', makeString(ranEaidValue), options, false);
    if (ranSiteIdValue)
      setCookie(
        'rakuten_ran_site_id',
        makeString(ranSiteIdValue),
        options,
        false
      );
  }

  data.gtmOnSuccess();
} else {
  const containerIdentifier = getRequestHeader('x-gtm-identifier');
  const defaultDomain = getRequestHeader('x-gtm-default-domain');
  const containerApiKey = getRequestHeader('x-gtm-api-key');

  let requestUrl =
    'https://' +
    enc(containerIdentifier) +
    '.' +
    enc(defaultDomain) +
    '/stape-api/' +
    enc(containerApiKey) +
    '/v1/rakuten/auth-proxy';

  let requestBody = {
    auth: {
      affiliate_key: data.affiliateKey,
      mid: data.mid,
    },
    sku_order: {
      siteid: getCookieValues('rakuten_site_id')[0] || '',
      time_entered: getCookieValues('rakuten_time_entered')[0] || '',
      orderid: data.orderId,
      currency: data.currency,
      trans_date: Math.round(getTimestampMillis() / 1000),
      optional_data: data.optionalData
        ? makeTableMap(data.optionalData, 'name', 'value')
        : {},
      items: data.items ? data.items : getItems(),
    },
  };

  if (isLoggingEnabled) {
    logToConsole(
      JSON.stringify({
        Name: 'Rakuten',
        Type: 'Request',
        TraceId: traceId,
        EventName: 'Conversion',
        RequestMethod: 'POST',
        RequestUrl: requestUrl,
        RequestBody: requestBody,
      })
    );
  }

  sendHttpRequest(
    requestUrl,
    (statusCode, headers, body) => {
      if (isLoggingEnabled) {
        logToConsole(
          JSON.stringify({
            Name: 'Rakuten',
            Type: 'Response',
            TraceId: traceId,
            EventName: 'Conversion',
            ResponseStatusCode: statusCode,
            ResponseHeaders: headers,
            ResponseBody: body,
          })
        );
      }

      if (statusCode >= 200 && statusCode < 300) {
        data.gtmOnSuccess();
      } else {
        data.gtmOnFailure();
      }
    },
    { method: 'POST', headers: { 'Content-Type': 'application/json' } },
    JSON.stringify(requestBody)
  );
}

function getItems() {
  let items = [];

  if (eventData.items && eventData.items[0]) {
    eventData.items.forEach((d, i) => {
      let item = {};

      if (d.name) item.product_name = d.name;
      else if (d.item_name) item.product_name = d.item_name;
      else if (d.title) item.product_name = d.title;

      if (d.sku) item.sku = d.sku;
      else if (d.item_sku) item.sku = d.item_sku;
      else if (d.item_id) item.sku = d.item_id;
      else if (d.id) item.sku = d.id;

      if (d.quantity) item.quantity = d.quantity;
      else if (d.item_quantity) item.quantity = d.item_quantity;
      else if (d.qty) item.quantity = d.qty;

      if (d.price) item.amount = d.price;
      else if (d.item_price) item.amount = d.item_price;

      if (item.amount && item.quantity) {
        item.amount = item.amount * item.quantity;
      }

      items.push(item);
    });
  }

  return items;
}

function determinateIsLoggingEnabled() {
  const containerVersion = getContainerVersion();
  const isDebug = !!(
    containerVersion &&
    (containerVersion.debugMode || containerVersion.previewMode)
  );

  if (!data.logType) {
    return isDebug;
  }

  if (data.logType === 'no') {
    return false;
  }

  if (data.logType === 'debug') {
    return isDebug;
  }

  return data.logType === 'always';
}

function enc(data) {
  data = data || '';
  return encodeUriComponent(data);
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "headerWhitelist",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "trace-id"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "referer"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "x-gtm-identifier"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "x-gtm-default-domain"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "x-gtm-api-key"
                  }
                ]
              }
            ]
          }
        },
        {
          "key": "headersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "rakuten_site_id"
              },
              {
                "type": 1,
                "string": "rakuten_time_entered"
              },
              {
                "type": 1,
                "string": "rakuten_ran_mid"
              },
              {
                "type": 1,
                "string": "rakuten_ran_eaid"
              },
              {
                "type": 1,
                "string": "rakuten_ran_site_id"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "rakuten_site_id"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "rakuten_time_entered"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "rakuten_ran_mid"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "rakuten_ran_eaid"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "rakuten_ran_site_id"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.stape.io/*"
              },
              {
                "type": 1,
                "string": "https://*.stape.net/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 08/09/2022, 18:42:07


